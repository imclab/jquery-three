window.requestAnimFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)}}(),function(e){var t={};Three=function(n,i,r){var s=this;this.container=n,this.options=e.extend(t,i),this.objects={},this.scenes={},this.cameras={},this.last="",e.getScript("https://raw.github.com/mrdoob/three.js/master/build/three.min.js",function(){s.init(i),r!==void 0&&r(s)})},Three.prototype={init:function(n){var i=this;e.extend(t,n),this.active={scene:!1,camera:!1},this.renderer=new THREE.WebGLRenderer,this.renderer.setSize(e(this.container).width(),e(this.container).height()),e(this.renderer.domElement).appendTo(this.container);var r=e(this.container).html();e(r).filter("scene").each(function(e,t){i.createScene(t)}),this.tick()},destroy:function(){return this.each(function(){var t=e(this);t.data("three"),t.removeData("three")})},self:function(t,n){var i=[];return this.each(function(){var r=e(this),s=r.data("three");s||(s=new Three(this,t,n),e(this).data("three",s)),i.push(s)}),e(i)},tick:function(){var e=this;this.render(),requestAnimFrame(function(){e.tick()})},render:function(){this.active.scene&&this.active.camera&&this.renderer.render(this.active.scene,this.active.camera)},show:function(){},hide:function(){},update:function(){},detect:function(){return{canvas:!!window.CanvasRenderingContext2D,webgl:function(){try{return!!window.WebGLRenderingContext&&!!document.createElement("canvas").getContext("experimental-webgl")}catch(e){return!1}}(),workers:!!window.Worker,fileapi:window.File&&window.FileReader&&window.FileList&&window.Blob,all:function(){return this.webgl&&this.canvas&&this.workers&&this.fileapi}}}},e.fn.three=function(e,t){return e||(e=!1),t||(t=function(e){return e}),Three.prototype.self.apply(this,arguments,e,t)}}(jQuery),function(e){Three.prototype=e.extend(Three.prototype,{addClass:function(t){var n=this.last;e(this.container).find("#"+n.id).addClass(t);var i=this.css(e(this.container).find("#"+n.id));return this.cssSet(i),this}})}(jQuery),function(e){Three.prototype=e.extend(Three.prototype,{css:function(t){var n=document.styleSheets,i={};for(var r in n){var s=n[r].rules||n[r].cssRules;for(var o in s)t.is(s[o].selectorText)&&(i=e.extend(i,this.css2json(s[o].style),this.css2json(t.attr("style"))))}return i},cssSet:function(e){var t=this.last;for(var n in e){var i=n.replace("-webkit-","").replace("-moz-","");switch(i){case"width":t.mesh.scale.x=parseInt(e[n],10);break;case"height":t.mesh.scale.y=parseInt(e[n],10);break;case"top":t.mesh.position.y=parseInt(e[n],10);break;case"left":t.mesh.position.x=parseInt(e[n],10);break;case"color":var r=this.colorToHex(e[n]);t.mesh.material.color.setHex(r);break;case"animation-duration":console.log(i,e[n]);break;case"animation-timing":console.log(i,e[n]);break;case"animation-delay":console.log(i,e[n]);break;case"animation-iteration-count":console.log(i,e[n]);break;case"animation-direction":console.log(i,e[n]);break;case"animation-fill-mode":console.log(i,e[n]);break;case"animation-name":console.log(i,e[n])}}},cssScene:function(e){for(var t in e)switch(t){case"display":break;case"background-image":this.cssSkybox(e[t])}},cssSkybox:function(e){{e.replace(/\s|url\(|\)/g,"").split(",")}},css2json:function(e){var t={};if(!e)return t;if(e instanceof CSSStyleDeclaration)for(var n in e)e[n].toLowerCase&&(t[e[n].toLowerCase()]=e[e[n]]);else if("string"==typeof e){e=e.split("; ");for(var i in e){var r=e[i].split(": ");t[r[0].toLowerCase()]=r[1]}}return t}})}(jQuery),function(e){Three.prototype=e.extend(Three.prototype,{animate:function(){}})}(jQuery),function(e){Three.prototype=e.extend(Three.prototype,{})}(jQuery),function(e){Three.prototype=e.extend(Three.prototype,{add:function(e,t){t||this.active.scene,e.nodeName.toLowerCase()},addPlane:function(t){var n=new THREE.PlaneGeometry(1,1);n.dynamic=!0;var i=new THREE.MeshBasicMaterial({color:0});this.objects[t]={id:t,mesh:new THREE.Mesh(n,i)},this.scene.add(this.objects[t].mesh),e("<plane>").attr("id",t).appendTo(this.container),this.last=this.objects[t];var r=this.css(e(this.container).find("#"+t));return this.cssSet(r),this},addCamera:function(){},addMesh:function(){},addAsset:function(){}})}(jQuery),function(e){Three.prototype=e.extend(Three.prototype,{createScene:function(t){var n=e(t),i=this,r=n.attr("id");this.scenes[r]=new THREE.Scene,n.children().each(function(){i.add(this,i.scenes[r])});var s=this.css(n);this.cssScene(s)}})}(jQuery),function(e){Three.prototype=e.extend(Three.prototype,{})}(jQuery),function(e){Three.prototype=e.extend(Three.prototype,{colorToHex:function(e){if("#"===e.substr(0,1))return e.replace("#","0x");var t=/(.*?)rgb\((\d+), (\d+), (\d+)\)/.exec(e),n=parseInt(t[2],10).toString(16),i=parseInt(t[3],10).toString(16),r=parseInt(t[4],10).toString(16);return 1==n.length&&(n="0"+n),1==i.length&&(i="0"+i),1==r.length&&(r="0"+r),"0x"+n+i+r}})}(jQuery);